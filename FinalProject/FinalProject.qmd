---
title: "Atletico Madrid season 23/24 team performance analysis"
format: html
editor: visual
---

# Atletico Madrid season 23/24 team performance analysis

In the past thirteen years of La Liga, Atlético Madrid has been regarded as a strong title contender. Despite the dominance of Spain’s two traditional big clubs, Barcelona and Real Madrid, Los Colchoneros managed to break their monopoly and win the league title twice, they were seen this way because of their recent history in the league. The reason is that Atlético has been the only team to consistently challenge Real Madrid and Barcelona over the last decade. Since the 2014/15 season, Atlético Madrid’s league standings have never dropped below third place. However, in the 2023/24 season, their performance plummeted drastically, finishing fourth in the league.

In this report, I will analyze player and team data to answer one question: What caused Atlético Madrid’s poor performance last season? To uncover useful insights, I will explore various attributes across different dimensions. For team performance metrics, I will examine data on accurate passes, crosses, goals conceded, interceptions, and other relevant statistics that reflect overall team effectiveness. Player performance metrics will focus on individual contributions, including expected goals (xG), assists, clearances, fouls committed, and tackles won. Additionally, match-specific insights will provide detailed information on goals scored, scoring attempts, possession percentages, and cards issued per match. By combining these metrics, I aim to identify the factors behind Atlético Madrid’s performance last season.

The dataset used in this report, “La Liga 2023/24: Team & Player Stats,” is hosted on Kaggle, a platform for sharing open data. It was collected and organized by user Whispering Kahuna using data sourced from FotMob, a proprietary platform for football statistics. All copyrights for the original data belong to FotMob, and this dataset is a restricted collection of publicly viewable data and does not claim ownership of FotMob’s data.

# Background Information

```{r formation, echo=FALSE}
knitr::include_graphics("ATM_formation.png")
```
Before we uncover the truth behind Atlético Madrid’s data from last season, we must first understand their tactics. In the 2023/24 season, Atlético Madrid mostly adopted a 3-5-2 formation, featuring three defenders and five midfielders: two wing-backs, two versatile midfielders, and a defensive number 6. In attack, they utilized two forwards to pose a constant threat to the opposition’s defense. As the figure shown above.

The 3-5-2 formation places five players in midfield, giving Atlético Madrid a numerical advantage in central areas during midfield battles. This setup allows them to flexibly apply pressure on opponents, with some midfielders pushing forward to press and create threats, while others drop back to assist with organization and support. Under heavy defensive pressure, the two wing-backs can drop back into position, forming a five-man defensive line. 

The two wing-backs are undoubtedly key players, crucial to the team’s success on both ends of the pitch. Offensively, they push high up to provide width, stretch the opposition’s defense, create opportunities for crosses, and combine with midfielders and forwards. They also participate in build-up play, forming diverse attacking combinations with central players. Defensively, wing-backs quickly drop back to form a five-man backline, adding stability and covering wide spaces that opponents might exploit. Their ability to transition seamlessly between attack and defense is the cornerstone of the team’s tactical balance.

If a wing-back underperforms, the attacking threat in their area diminishes, and poor positioning can be exploited by opponents. Given the demands of the role, wing-backs face strict physical requirements, needing to tirelessly shuttle up and down the flanks. When possession is lost, they must swiftly track back to defend; when their team holds the ball, they push forward to provide width. Atlético Madrid utilizes wing-backs differently depending on the flank: on the right, they often employ a natural-footed wing-back to stay wide and deliver crosses into the box, linking up with midfielders or forwards making runs. On the left, they tend to use an inverted wing-back, such as Yannick Carrasco in the 2022/23 season, who cuts inside to threaten the goal directly. During attacks, the left wing-back often advances to a position akin to a left winger, while defensively, they drop back into the five-man defensive line. This aggressive tactical approach places exceptionally high demands on players’ tactical awareness, technical ability, and fitness.

Compared to the common four-defender formations like 4-4-2, the 3-5-2 offers better solutions against teams playing with two forwards. In a 4-defender setup, the two center-backs are often left in 1v1 situations against the opposition’s forwards, whereas in a 3-defender system, the extra center-back creates a local 3v2 advantage in the penalty area. In a three-center-back system, the wide center-backs take up positions closer to the flanks, often acting more like full-backs to support the midfield. Atlético Madrid’s left wide center-back is more involved in the attacking build-up, frequently overlapping or making runs into the half-space to combine with the left wing-back, creating 2v1 situations. They also often carry the ball forward to initiate attacks. On the other hand, the right wide center-back adopts a more conservative role, maintaining the balance between attack and defense. Meanwhile, the central center-back focuses on dealing with through balls and covering the space behind the defensive line.

Additionally, the three center-backs facilitate better ball progression from the back. They are less vulnerable to pressure from opposing forwards. Atlético’s goalkeeper, Jan Oblak, does not act as a playmaker from the back. Beyond his goalkeeping duties, Oblak focuses on safely delivering the ball to the defenders at the edge of the penalty area, allowing them to initiate attacks and counterplays.
While Atlético doesn’t employ a sweeper-keeper in a 3+2 build-up system with inverted full-backs or free roles, their backline typically involves 3+1 players during build-up play. This setup is sufficient to handle high pressing from opposition front threes effectively.

```{r matchscreenshot, echo=FALSE}
knitr::include_graphics("MatchScreenShot.png")
```

In this scenario, Atlético Madrid’s three defenders spread wide to provide width, while the number 6 drops deep to support as the organizing pivot. Typically, the central pivot in their midfield trio focuses on defensive tasks between the defensive line and midfield rather than initiating attacks. When the opposition applies high pressing, both wide center-backs are targeted, leaving the central center-back unmarked. The number 6 also drops back to receive the ball, creating a dilemma for the pressing player: pressing the central center-back leaves space behind to exploit, while tracking the pivot allows the wide center-back to pass back to the unpressured central defender, who can comfortably continue the build-up. This interplay effectively counters the opponent’s press, utilizing spatial advantages to retain control.

```{r tactic, echo=FALSE}
knitr::include_graphics("Tactic.png")
```


In the screenshot, we observe only four Atltico Madrid players in their half besides the defenders: one right wing-back and three central players, one of whom is a forward. This raises the question: where are the other midfielders and the left wing-back? And why is a forward, whose primary role is traditionally to score, positioned in midfield instead of the attacking third? This 2D diagram replicates the off-ball movements from an earlier match situation. The absence of the left wing-back and another midfielder suggests they are likely positioned higher up the pitch, possibly providing width and vertical depth in the attacking third. The forward dropping into midfield reflects tactical flexibility—likely to overload central areas, create passing lanes, or help progress the ball against an organized press. Such movements are characteristic of Atlético’s dynamic approach, where players frequently interchange roles to exploit spatial and numerical advantages during transitions.

Atletico Madrid’s star player and all-time top scorer, Antoine Griezmann, plays as a deep-lying forward. In modern football, players are often assigned multiple roles, but here we focus solely on the distinct role tailored to his strengths. Both a false nine and a deep-lying forward are tasked with scoring and playmaking, but their priorities differ. A false nine primarily looks for shooting opportunities behind the center-forward, with playmaking as a secondary responsibility. In contrast, a deep-lying forward’s primary role is to drop into deeper spaces, hold up the ball, distribute it wide or back to organize play, and create opportunities for both frontline players and advancing teammates, with scoring being a secondary task. This role demands exceptional football intelligence, off-ball movement, and playmaking skills. Griezmann, after transitioning to this role, has adapted perfectly to its demands. At Atlético Madrid, he often drops even deeper than a typical deep-lying forward, effectively becoming the team’s offensive orchestrator, seamlessly blending his creativity with his ability to link play.

As shown in the image, when the deep-lying forward drops into midfield to receive the ball and organize play, he frees up a midfielder to make forward runs—in this case, number 14, Marcos Llorente. With good speed and versatility, Llorente primarily operates in the wide areas, connecting midfield with the attacking and defensive zones. Functioning like a box-to-box midfielder, he actively moves between the two penalty areas, often overlapping on the right flank to combine with Molina, taking turns to exploit spaces in the half-space.
Number 5, Rodrigo De Paul, who is adept at orchestrating the right-side attack on his own, provides cover for Llorente’s advanced position. Meanwhile, Griezmann takes over De Paul’s role on the left, organizing play from that side. On the left flank, number 12, wing-back Lino, pushes up into a left winger’s position to add width and attacking options. Right wing-back Molina stays deeper to maintain the balance between attack and defense. Atlético Madrid emphasizes defensive stability while adjusting the number of players pushing forward based on the opponent’s defensive structure and pressing intensity during off-ball phases. This careful modulation ensures both security and flexibility in their tactical setup.

In Atletico Madrid’s setup, aside from the number 6 role, the other two midfielders frequently push forward depending on the situation. These midfielders adapt dynamically to exploit attacking opportunities, often making forward runs into advanced positions or supporting wide players. Their movement adds unpredictability and overloads specific areas of the pitch, creating threats through overlapping runs, combination play, or penetrating the opponent’s defensive lines. This flexibility is key to linking midfield with attack, maintaining fluidity, and ensuring the team can quickly transition between defense and offense.



# Data Exploration

## Team Performance

```{r xG vs. Goals Scored , echo=FALSE}
# Load necessary libraries
library(ggplot2)
library(dplyr)
library(tidyr)
library(cowplot)

# Load the data
laliga_xg <- read.csv("archive/Laliga_table_xg_2023_24.csv")
laliga_table <- read.csv("archive/Laliga_table_2023_24.csv")

# Prepare the data
laliga_table <- laliga_table %>%
  separate(scoresStr, into = c("goalsScored", "goalsConceded"), sep = "-", convert = TRUE)

merged_data <- laliga_xg %>%
  inner_join(laliga_table, by = c("name", "played")) %>%
  filter(idx.x <= 6) # Filter top 5 teams

# Scatter plot with arrows for xG vs. Goals Scored and automatic legend
scatter_plot <- ggplot(merged_data) +
  geom_point(aes(x = xg, y = goalsScored, color = "Actual Goals Scored"), size = 4) + # Actual goals scored
  geom_point(aes(x = xg, y = xg, color = "Expected Goals (xG)"), size = 4) + # Expected goals
  geom_segment(aes(x = xg, y = xg, xend = xg, yend = goalsScored, linetype = "Difference"), 
               arrow = arrow(length = unit(0.3, "cm")), size = 1.2, color = "black") + # Arrow for difference
  geom_text(aes(x = xg, y = goalsScored, label = name), vjust = -1, size = 3) + # Team names
  labs(
    title = "Comparison of Expected Goals (xG) and Actual Goals Scored in La Liga 2023/24",
    subtitle = "Relationship between Expected and Actual Goals for the top 5 teams",
    x = "Expected Goals (xG)",
    y = "Goals Scored",
    color = NULL,      # Remove the word "Legend" for color
    linetype = NULL     # Remove the word "Legend" for line type
  ) +
  scale_color_manual(values = c("Actual Goals Scored" = "red", "Expected Goals (xG)" = "blue")) +
  scale_linetype_manual(values = c("Difference" = "solid")) +
  xlim(35, 80) + # Adjust x-axis range to provide more space
  theme_minimal()

# Display the scatter plot with the adjusted x-axis
print(scatter_plot)
```

From the graph above, we can see how Atlético Madrid’s performance in expected goals (xG) and actual goals scored compares to other top teams in the 2023/24 La Liga season. The blue dots represent the predicted total goals for the season, while the red dots indicate the actual goals scored by the end of the season, and the arrows show the difference between the two. Atlético Madrid’s actual goals exceeded their xG by +6.98, demonstrating decent attacking efficiency. However, this is still significantly behind Real Madrid (+17.24) and Girona (+13.18). Barcelona’s performance was close to their xG, but they scored a total of 79 goals throughout the season, which is lower than Girona’s 85 and Real Madrid’s 87. These three teams displayed exceptional scoring abilities, with Real Madrid and Girona significantly outperforming expectations.

```{r divergence-plot-xgconceded-vs-conceded, echo=FALSE}
# Load necessary libraries
library(ggplot2)
library(dplyr)
library(tidyr)

# Load the data
laliga_xg <- read.csv("archive/Laliga_table_xg_2023_24.csv")
laliga_table <- read.csv("archive/Laliga_table_2023_24.csv")

# Prepare the data
laliga_table <- laliga_table %>%
  separate(scoresStr, into = c("goalsScored", "goalsConceded"), sep = "-", convert = TRUE) # Extract actual goals conceded

merged_data <- laliga_xg %>%
  inner_join(laliga_table, by = c("name", "played")) %>%
  filter(idx.x <= 6) %>% # Filter top 6 teams (if needed)
  mutate(conceded_diff = xgConceded - as.numeric(goalsConceded)) # Calculate the difference

# Divergence plot for xGConceded vs. Goals Conceded
divergence_plot <- ggplot(merged_data, aes(x = reorder(name, conceded_diff), y = conceded_diff, fill = conceded_diff > 0)) +
  geom_bar(stat = "identity", width = 0.6) +
  geom_text(aes(label = round(conceded_diff, 2)), vjust = ifelse(merged_data$conceded_diff > 0, -0.5, 1.5), size = 3) +
  scale_fill_manual(
    values = c(`TRUE` = "blue", `FALSE` = "red"),  # Correctly formatted logical values
    labels = c("Underperformance", "Overperformance")
  ) +
  labs(
    title = "Divergence Plot: xGConceded vs. Actual Goals Conceded",
    subtitle = "Difference between Expected Goals Conceded (xGConceded) and Actual Goals Conceded",
    x = "Team",
    y = "Difference (xGConceded - Goals Conceded)",
    fill = "Performance"
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

# Display the divergence plot
print(divergence_plot)
```

```{r plot for goal conceded, echo=FALSE}
# Prepare the data
laliga_table <- laliga_table %>%
  mutate(goalsConceded = as.numeric(goalsConceded)) # Ensure 'goalsConceded' is numeric

# Create a bar plot for goals conceded, sorted from high to low
goals_conceded_plot <- ggplot(laliga_table, aes(x = reorder(name, -goalsConceded), y = goalsConceded, fill = goalsConceded)) +
  geom_bar(stat = "identity", width = 0.7) +
  geom_text(aes(label = goalsConceded), vjust = -0.5, size = 3.5) + # Add text labels on top of the bars
  scale_fill_gradient(low = "blue", high = "red") + # Color gradient based on goals conceded
  labs(
    title = "Total Goals Conceded by Each Club (High to Low)",
    x = "Club",
    y = "Goals Conceded",
    fill = "Goals Conceded"
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

# Display the bar plot
print(goals_conceded_plot)

```

```{r comparison GA and xGA, echo=FALSE}
# Load necessary libraries
library(ggplot2)
library(dplyr)
library(tidyr)

# Load the data
laliga_xg <- read.csv("archive/Laliga_table_xg_2023_24.csv")
laliga_table <- read.csv("archive/Laliga_table_2023_24.csv")

# Calculate xGA and prepare the data
laliga_xg <- laliga_xg %>%
  mutate(xGA = xg - xgConceded) %>%
  select(name, xGA)

# Merge with goalConDiff from Laliga_table_2023_24.csv
comparison_data <- laliga_table %>%
  select(name, goalConDiff) %>%
  inner_join(laliga_xg, by = "name")

# Reshape the data for the paired bar chart
paired_data <- comparison_data %>%
  pivot_longer(cols = c("xGA", "goalConDiff"), names_to = "Metric", values_to = "Value")

# Create the paired bar chart
paired_bar_plot <- ggplot(paired_data, aes(x = reorder(name, -Value), y = Value, fill = Metric)) +
  geom_bar(stat = "identity", position = "dodge", width = 0.7) +
  labs(
    title = "Paired Bar Chart: xGA vs. GoalConDiff",
    subtitle = "Comparing Expected Goal Contribution and Goal Differential for Each Team",
    x = "Team",
    y = "Value",
    fill = "Metric"
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

# Display the plot
print(paired_bar_plot)

```

```{r table conceded, echo=FALSE}
library(dplyr)
library(tidyr)
library(knitr)

# Load the La Liga data
laliga_table <- read.csv("archive/Laliga_table_2023_24.csv")

# Extract goalsConceded from scoresStr
laliga_table <- laliga_table %>%
  separate(scoresStr, into = c("goalsScored", "goalsConceded"), sep = "-", convert = TRUE)

# Ensure 'goalsConceded' is numeric
laliga_table <- laliga_table %>%
  mutate(goalsConceded = as.numeric(goalsConceded))

# Calculate summary statistics
summary_stats <- laliga_table %>%
  summarize(
    number_of_teams = n(),
    min_goals_conceded = min(goalsConceded, na.rm = TRUE),
    Q1 = quantile(goalsConceded, 0.25, na.rm = TRUE),
    median = median(goalsConceded, na.rm = TRUE),
    Q3 = quantile(goalsConceded, 0.75, na.rm = TRUE),
    max_goals_conceded = max(goalsConceded, na.rm = TRUE),
    MAD = mean(abs(goalsConceded - mean(goalsConceded, na.rm = TRUE)), na.rm = TRUE), # Mean Absolute Deviation
    SAM = sum(abs(goalsConceded - mean(goalsConceded, na.rm = TRUE)), na.rm = TRUE), # Sum of Absolute Deviations
    SASD = sum((goalsConceded - mean(goalsConceded, na.rm = TRUE))^2, na.rm = TRUE)  # Sum of Squared Deviations
  )

# Find Atlético Madrid's stats
atletico_stats <- laliga_table %>%
  filter(name == "Atletico Madrid") %>%
  select(name, goalsConceded)

# Compare Atlético Madrid's goalsConceded against summary statistics
comparison <- summary_stats %>%
  mutate(
    Atletico_GoalsConceded = atletico_stats$goalsConceded
  )

# Display the comparison table
comparison %>%
  t() %>% # Transpose for better readability
  as.data.frame() %>%
  rename(Value = V1) %>% # Rename the column for clarity
  knitr::kable(
    col.names = c("Metric", "Value"),
    caption = "Summary Statistics and Atlético Madrid's Performance",
    format = "pipe"
  )

```
